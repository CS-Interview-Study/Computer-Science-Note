# 운영체제의 역할과 구조

### 역할

- CPU 스케줄링/프로세스 관리
- 메모리 관리
- 디스크 파일 관리
- I/O 디바이스 관리

### 시스템콜

운영체제가 커널에 접근하기 위한 인터페이스

유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수 호출 시 사용

- 유저 프로그램이 I/O요청으로 trap을 발동하면 올바른 I/O 요청인지 확인 후 유저 모드가 시스템콜을 통해 커널 모드로 변환되어 실행
- 컴퓨터 자원에 대한 직접 접근을 차단하고, 프로그램을 다른 프로그램으로부터 보호 가능

ex) fs.readFile() : 파일 시스템의 파일을 읽는 함수 발동

- 프로세스나 스레드에서 OS로 요청이 있을 때 시스템콜 이라는 인터페이스와 커널을 거쳐 OS에 전달
- 하나의 추상화 계층으로 네트워크 동신이나 DB와 같은 낮은 단계의 영역 처리를 신경쓰지 않고 프로그램을 구현 할 수 있음

### modebit

- 시스템콜이 작동될 때 modebit을 참고해 유저 모드와 커널 모드로 구분
- 1 or 0의 값을 가지는 플래그 변수
- I/O 디바이스는 OS를 통해서만 작동해야함 → 이를 위한 장치 modebit
- 0 : 커널모드, 1: 유저모드
- 1 유저모드일 경우 시스템콜 X, 한정된 일만 가능

### 유저모드

유저가 접근 할 수 있는 영역을 제한적으로 두어 컴퓨터 자원에 함부로 침범X

### 커널모드

모든 컴퓨터 자원에 접근할 수 있는 모드

### 커널

OS의 핵심 부분이자 시스템 콜 인터페이스를 제공하며, OS의 중추적 역할

- 보안, 메모리, 프로세스, 파일시스템, I/O 디바이스, I/O 요청관리

# 컴퓨터의 요소

### CPU(Central Processing Unit)

산술논리연산장치, 제어장치, 레지스터로 구성되어 있는 장치, 인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행

### 제어장치(CU, Control Unit)

- 프로세스 조작을 지시하는 CPU의 한 부품
- 입출력장치 간 통신을 제어
- 명령어를 읽고 처리
- 데이터 처리를 위한 순서 결정

### 레지스터

- cpu안에 있는 빠른 임시기억장치
- 메모리보다 연산 속도 빠름
- cpu 자체적으로 데이터 저장X, 레지스터를 거쳐 데이터 전달

### 산술논리연산장치(ALU, arithemic logic unit)

산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로

### cpu의 연산 처리

① 제어 장치가 메모리에 계산할 값 로드, 레지스터에도 로드

② 제어 장치가 레지스터에 있는 값 계산하라고 ALU에 명령

③ 제어 장치가 계산된 값을 레지스터→ 메모리로 저장

### 인터럽트

어떤 신호가 들어왔을 때 CPU를 잠깐 정지시키는 것

- I/O 디바이스로 인한 인터럽트
- 프로세스 오류
- 0으로 숫자를 나누는 산술연산에서의 인터럽트

**인터럽트 발생**

인터럽트 핸들러 함수가 모여 있는 인터럽트 벡터로 가 함수 실행

인터럽트 간에는 우선순위가 있음

- 하드웨어 인터럽트
    
    IO디바이스에서 발생하는 인터럽트
    
- 소프트웨어 인터럽트/trap트랩
    
    프로세스 오류 등으로 프로세스가 시스템콜 호출 시 발생
    

### DMA 컨트롤러

- IO디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치
- 많은 인터럽트 요청이 cpu에만 들어와 cpu부하를 막아줌
- 하나의 작업을 cpu와 DMA 컨트롤러가 동시에 하는 것 방지

### 메모리/RAM

- 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치
- CPU 계산 담당, 메모리 기억 담당

### 타이머

특정 프로그램에 시간 제한을 다는 역할

### 디바이스 컨트롤러

컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU
