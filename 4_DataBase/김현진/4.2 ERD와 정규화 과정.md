### ERD = Entity Relationship Diagram

데이터베이스를 구축할 때 가장 기초적인 **뼈대 역할**

**릴레이션 간의 관계**들을 정의

서비스 구축시 가장 먼저 신경써야 하는 부분

## 2.1 ) ERD의 중요성

ERD는 시스템의 요구사항을 기반으로 작성 → 기반으로 데이터베이스 구축

디버깅, 비즈니스 프로세스 재설계 필요 시 설계도 역할 담당

비정형 데이터를 충분히 표현할 수 없다는 단점이 있음

## 2.3) 정규화 과정

릴레이션 간의 잘못된 종속 관계로 데이터베이스 **이상 현상이 일어나서 이를 해결**하거나

저장 공간을 효율적으로 사용하기 위해 **릴레이션을 여러 개로 분리**하는 과정

### 데이터베이스 이상 현상

잘못 설계된 데이터베이스로 데이터 조작시 발생하는 현상

- **삭제이상**
    
    투플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상
    
- **삽입이상**
    
    투플 삽입 시 특정 속성에 해당하는 값이 없어 NULL 값을 입력해야 하는 현상
    
- **수정이상**
    
    투플 수정 시 중복된 데이터의 일부만 수정되어 데이터의 불일치 문제가 발생하는 현상
    

기본키가 아니면서 결정자인 속성(비후보자 결정자 속성)이 있을 때 발생

### 정규화 과정

- 정규형 원칙으로 정규형을 만들어가는 과정
- 대부분 두 가지 이상의 정보가 한 릴레이션에 저장되어 있어서 발생
    
    → 이상현상이 없어질 때까지 릴레이션을 분해
    
- 정규화된 정도 = **정규형(NF, Normal Form)**으로 표현

> **기본 정규형 :** 제 1, 2, 3정규형, 보이스/코드 정규형
> 
> 
> **고급 정규형 :** 제 4, 5정규형
> 

### 정규형 원칙

- 더 좋은 구조로 만들어야 하고
- 자료의 중복성은 감소해야 하고
- 독립적인 관계는 별개의 릴레이션으로 표현해야 하며
- 각각의 릴레이션은 독립적인 표현이 가능해야 하는 것

### 제1정규형

- 릴레이션의 속성 값이 원자값이어야 한다는 것
    
    = 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합 X
    

### 제2정규형

- 릴레이션의 기본키가 복합키일 때, 복합키의 일부분이 다른 속성의 결정자인지 여부를 판단
- 릴레이션이 제 1 정규형이고, 기본키가 아닌 속성이 기본키에 완전 함수 종속일 때
    
    > **완전 함수 종속?**
    A → B 종속성이 성립할 때, B가 A의 속성 전체에 함수 종속하고 부분 집합 속성에 함수 종속하지 않을 경우
    > 
- 부분 함수의 종속성을 제거한 형태
- 릴레이션을 분해할 때 동등한 릴레이션으로 분해해야 하고
- 정보 손실이 발생하지 않는 무손실 분해로 분해되어야 함

### 제3정규형

- 릴레이션이 제 2정규형이고, 기본키가 아닌 모든 속성이 이행적 함수 종속(transitive FD)를 만족하지 않는 상태
- **이행적 함수 종속**
    
    A → B, B → C 가 존재하면 A → C 가 성립하는데,
    
    이때 집합 C가 집합 A에 이행적으로 함수 종속되었다고 함
    

### 보이스/코드 정규형 (BCNF)

결정자가 후보키가 아닌 함수 종속 관계를 제거하여

릴레이션의 함수 종속 관계에서 모든 결정자가 후보키인 상태

결정자이면서 후보키가 아닌 속성이 존재하면 이상현상 발생(순환구조)

### 주의

정규형을 거쳐 테이블을 나눈다고 해서 성능이 100% 좋아지는 것은 X

어떠한 쿼리는 조인해야 하는 경우도 발생 - 오히려 느려짐

서비스에 따라 정규화, 비정규화 필요
