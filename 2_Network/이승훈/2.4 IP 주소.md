# IP 주소

## ARP

IP 주소를 MAC 주소로 변환하는데 사용되는 프로토콜입니다. 컴퓨터 간의 통신은 결국 MAC 주소를 기반으로 통신해야 하기 때문에, ARP는 IP와 MAC 주소의 다리 역할을 수행하며 통신을 가능하게 합니다.

**과정**

1. 장치 A에서 MAC 주소 조회를 위해 ARP 요청을 브로드캐스트로 전송
2. 해당 주소에 맞는 장치에 대해 ARP 응답 유니케스트를 통해 MAC 주소를 반환

> **브로드캐스트(Broadcast)**
> 네트워크에 연결된 모든 호스트에 데이터를 전송되는 방식
>
> **유니캐스트(Unicast)**
> 고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 전송하는 방식

## 홉바이홉 통신

IP 주소를 통해 통신하는 과정을 말합니다. 즉 통신망에서 각 패킷이 여러 라우터를 건너가는 과정을 말하며, 통신 장치에 있는 라우팅 테이블 IP를 통해 시작 주소부터 시작하여 다음 IP로 계속 이동하는 '라우팅' 과정을 거쳐 패킷이 최종 목적지로 도달하는 과정을 수행합니다.

> **라우팅**: IP 주소를 찾아가는 과정

### 라우팅 테이블

라우팅 테이블이란 송신지에서 수신지까지 도달하기 위해 사용되는 리스트 형식의 자료 구조입니다. 라우터의 목적지 정보들과 그 목적지로 가기 위한 방법들이 명시되어 있습니다. 또한 라우팅 테이블에는 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야할 다음 라우터 정보를 가지고 있습니다.

### 게이트웨이

네트워크 간 통신을 가능하게 하는 컴퓨터 또는 소프트웨어를 말합니다. 서로 다른 네트워크상의 통신에서 수문장 역할을 수행하며, 서로 다른 프로토콜을 변환해주는 역할도 수행합니다.

## IP 주소 체계

- IP 주소는 IPv4와 IPv6로 나뉩니다.
- 추세는 IPv6로 가고 있지만, 현재 가장 많이 쓰이는 주소 체계는 IPv4입니다.

### 클래스 기반 할당 방식

이전에 사용된 IP 주소 할당 방식으로, IP 주소를 A,B,C,D,E 총 5개의 클래스로 구분합니다. 이때 클래스 A,B,C는 1:1 통신에 사용되며, D 클래스는 멀티케스트 통신, E 클래스는 예비용으로 사용됩니다.

- 각 클래스 구분 시 맨 왼쪽에 있는 비트인 '구분 비트'를 사용합니다. 
- 네트워크의 첫 번째 주소는 네트워크 주소, 가장 마지막 주소는 브로드캐스트용 주소로 사용됩니다. 각각 네트워크를 구별하는 용도와, 네트워크에 속해 있는 모든 컴퓨터에 데이터를 전송할 때 사용됩니다.

그러나 위 방식은 사용하는 주소보다 버리는 주소가 많다는 단점이 있기 때문에 이를 해소하기 위해 DHCP와 IPv6, NAT 기술이 등장합니다.

### DHCP

DHCP는 네트워크 관리 프로토콜로, IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위해 사용됩니다. 이 기술을 이용하면 네트워크 장치의 IP 주소를 수동으로 설정할 필요 없이 인터넷에 접속할 때마다 자동으로 IP 주소를 할당할 수 있습니다. 

많은 라우터 및 게이트웨이 장비에 DHCP 기능이 존재하며, 대부분 가정용 네트워크에서 IP 주소를 할당합니다.

### NAT

IP 주소 정보를 수정하여 다른 주소로 매핑하는 기술입니다. 사설 IP를 공인 IP로 변환하거나 공인 IP를 사설 IP로 변환하는데 쓰입니다. 기존 Ipv4 체계에서 많은 주소를 처리할 수 없었던 문제를 NAT를 사용하여 처리할 수 있었던 것으로 알고 있습니다.

> NAT는 주로 여러 대의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위해 사용됩니다. 인터넷 공유기에 NAT 기능이 탑재되어 있기 때문에 인터넷 공유기에 인터넷 회선을 연결하면 여러 PC에서 인터넷에 접속할 수 있습니다.
